---
title: java 重定向与转发的异同
date: 2016-08-10 13:34:12
tags: [Java,Web]
description: 重定向和请求转发，在web中的应用都不少，但是之间有什么区别？在什么时候应该选择哪种跳转方式？
---
### 重定向与请求转发的异同

##### 同：
+ 两种方式都能跳转到目标页面

##### 异：
+ 本质区别：
  1. 请求转发是服务器行为，而重定向是客户端行为：
    + 转发过程：browser http请求----> web server接受请求----> 调用内部的一个方法在容器内部完成请求处理和转发 动作----->将目标资源发生给客户端；转发路径必须经过web容器的url，不能转向到其他的web路径，中间传递的是自的容器内的request. 而在客户端浏览器地址栏显示出来的是第一次访问的路径。也就是说，转发行为是浏览器只做了一次访问请求
    + 重定向过程：browser http请求----> web server接受后发送302状态码以及对应新的location地址给客户端----> 客户端发现302状态码，则自动再转发一个新的http请求，请求url是新的location地址 ---->服务器根据此请求寻找资源并发送给客户. 重定向行为是浏览器做了至少两次访问请求.
  2. 对于请求次数的解析：
    + 重定向在客户端 request A ,server响应状态码，指示browser应该访问 B. 这时候可以看到地址栏发生变化。重定向可以访问自己web应用以外的资源，在充定向过程中，传输的信息会丢失
    + 请求转发是在服务器内部一个request/response的处理权移交，对于客户端来说，它只知道自己最早的请求的那个A但是不知道中间其他的访问路径，传输信息不会丢失

+ 从数据分享角度：
  + 请求转发的转发页面与转发目标页面可以共享request里面的数据
  + 重定向的跳转页面之间不可以共享数据

+ 从运用角度：
  + 请求转发一般用于用户登录的时候，或者角色转发到响应的模块
  + 重定向一般用于用户注销登陆时返回和跳转到其他网站等

+ 从效率角度：
  + 请求转发效率比重定向效率高

+ 内部实现：
  + 请求转发部分：servlet主要负责处理具体的请求转发。通过获得RequestDispatcher对象，然后用forward方法进行请求转发
  ```
  RequestDisapatcher rd=reqest.getRequestDisapatcher();
  rd.forward(req,resp); //用这里的方法来进行转发
   ```
  + sendRedirect方法属于HttpServletResponse对象的getRequestDispatcher方法得到
