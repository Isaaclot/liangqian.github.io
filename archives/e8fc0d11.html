<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Redis基础数据结构 | 哈姆雷特1001</title>
  <meta name="author" content="Rico Nut">
  
  <meta name="description" content="Redis支持五种数据类型：string（字符串），hash（哈希），list（列表），set（集合）及zset(sorted set：有序集合)">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Redis基础数据结构"/>
  <meta property="og:site_name" content="哈姆雷特1001"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/cerulean.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  
  <!-- analytics -->
  



</head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">哈姆雷特1001</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content">
      


	
		<div class="page-header page-header-inverse ">		
			<h1 class="title title-inverse "> Redis基础数据结构</h1>
		</div>		
	






<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  
		 <div class="alert alert-success description">
			<i class="fa fa-info-circle"></i> <p>Redis支持五种数据类型：string（字符串），hash（哈希），list（列表），set（集合）及zset(sorted set：有序集合)</p>
			
		 </div> <!-- alert -->
	  		

	  <h5 id="Redis数据简述"><a href="#Redis数据简述" class="headerlink" title="Redis数据简述"></a>Redis数据简述</h5><ul>
<li>经常用来存储字符串，哈希结构，链表集合</li>
<li>Redis与memcached对比<ul>
<li>Redis可以用来做存储又可以做缓存，而memcached做缓存。主要因为redis具备持久化能力</li>
<li>Redis存储的数据多种结构(字符串，哈希结构，链表，集合，有序集合等)，而memcached只有一种存储结构(字符串)</li>
<li>redis支持数据的备份，即master-slave模式的数据备份；</li>
</ul>
</li>
</ul>
<h5 id="通用数据维护指令"><a href="#通用数据维护指令" class="headerlink" title="通用数据维护指令"></a>通用数据维护指令</h5><ol>
<li>keys <code>pattern</code> : 模糊查询 pattern为正则查询(<code>eg. keys [C|L]*</code>);</li>
<li>RANDOMKEY : 返回随机的key</li>
<li>TYPE keyname : 查询key的类型</li>
<li>EXISTS keyName : 判断是否存在key</li>
<li>DEL keyname 删除key</li>
<li>RENAME old new 从新命名</li>
<li>RENAMENX  判断新key是否会重名，如果已经存在新的key名，则操作失败</li>
<li>MOVE key db 移动数据到另一个库</li>
<li>ttl key  查询key有效期，-1表示永久有效 -2表示已经过期</li>
<li>EXPIRE key seconds 设置key的有效期，如果不设置，则永久有效</li>
<li>PEXPIRE key milliseconds 以毫秒为单位设置key的生命周期</li>
<li>PERSIST key 取消key的有效期限制</li>
</ol>
<h5 id="Redis数据结构操作指令说明"><a href="#Redis数据结构操作指令说明" class="headerlink" title="Redis数据结构操作指令说明"></a>Redis数据结构操作指令说明</h5><ul>
<li>结构操作指令说明<ol>
<li>Redis数据除了普通的通用指令之外，其他的指令都是针对Redis的四种数据结构，对数据的维护，包括增删查改。</li>
<li>而每个数据结构的增、删、查、改再进行细化操作，又有多种更加细分的操作指令。</li>
<li>只要按照这个思路，对Redis数据结构的花样维护这个思路去深入了解Redis的操作。</li>
</ol>
</li>
<li><p>字符串操作</p>
<ol>
<li><code>SET key value [expiration EX seconds(秒)|PX milliseconds(毫秒)] [NX|XX]</code>：设置字符串类型，后面可选参数，设置有效周期，用毫秒或者秒作为生命周期，而且，只能设置一个标准，如果选了两个，则以最后一个为准。nx表示key不存在的时候，才操作成功、xx表示key存在的时候才操作成功，可以用来区分创建或者新增操作。</li>
<li><code>MSET key value [key value ...]</code>一次创建多个k-v数据( MSET key1 “Hello” key2 “World”)</li>
<li>get key 获取key的值</li>
<li><code>MGET key1 key2</code>获取多个key的值</li>
<li><code>SETRANGE key offset value</code>在指定的偏移值对字符进行替换，如果缺数据，则以0代替</li>
<li>get key</li>
<li><code>GETRANGE key start end</code> 根据范围取key值</li>
<li><code>APPEND key value</code>在key的值后面增加数据</li>
<li><code>GETSET key value</code>获取旧的值，同时设置新的值，用来获取状态并更新状态</li>
<li><code>INCR key</code> 执行设置key值+1操作，并返回计算后的数据(减少为decr key)</li>
<li><code>INCRBY key increment</code>通过步进频率来增加</li>
<li><code>SETBIT key offset value</code> 位操作：设置字符的二进制值，而改变字符对值，比如大小写字母ascii相差32，修改对应位置的0或者1，即可进行大小写转换</li>
</ol>
</li>
<li><p>链表结构(List)类型</p>
<ol>
<li>增加值：[L|R]PUSH key value</li>
<li>去掉值：[L|R]POP key</li>
<li>删除值：<code>LREM key count value</code>count表示删除标示，如果count为正数，从头部往尾部删除，count为负数，从尾部开始删，如果为0，则删除所有匹配值的数据</li>
<li>查看长度：<code>LLEN key</code></li>
<li>在匹配的值前后插入值：<code>LINSERT key BEFORE|AFTER pivot value</code></li>
<li>两个链表之间迁移数据: <code>RPOPLPUSH source destination</code></li>
</ol>
</li>
<li>集合结构(<code>SET</code>)<ol>
<li>特点：无序性、确定性、唯一性,支持多个集合之间的交集、并集运算</li>
<li><code>SADD key member1 [member2]</code>往Set集合中添加成员数据，一条指令，可以添加一个或者多个成员数据</li>
<li><code>SCARD key</code>获取集合的成员数</li>
<li><code>SISMEMBER key member</code>判断 member 元素是否是集合 key 的成员</li>
<li><code>SMEMBERS key</code>返回集合中的所有成员</li>
<li><code>SRANDMEMBER key [count]</code>返回集合中一个或多个随机数,具体实际使用场景可实际斟酌使用</li>
<li><code>SREM key member1 [member2]</code>移除集合中一个或多个成员</li>
<li>交集运算：<ul>
<li><code>SINTER key1 [key2]</code>返回给定所有集合的交集</li>
<li><code>SINTERSTORE destination key1 [key2]</code>返回给定所有集合的交集并存储在 destination 中</li>
</ul>
</li>
<li>并集运算：</li>
</ol>
<ul>
<li><code>SUNION key1 [key2]</code>返回所有给定集合的并集</li>
<li><code>SUNIONSTORE destination key1 [key2]</code>所有给定集合的并集存储在 destination 集合中</li>
</ul>
</li>
<li>有序集合(<code>sorted set</code>)</li>
</ul>
<ol>
<li>有序集合的数据结构表现形式为<code>score(分数值) member(成员)</code> ,<code>score</code>主要是用于排序(不必须唯一)，而<code>member</code>为集合的成员(必须唯一)</li>
<li>不同的是每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。</li>
<li>集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)</li>
<li><code>ZADD key score1 member1 [score2 member2]</code>向有序集合添加一个或多个成员，或者更新已存在成员的分数</li>
<li><code>ZCARD key</code>获取有序集合的成员数</li>
<li><code>ZCOUNT key min max</code>计算在有序集合中指定区间分数的成员数</li>
<li><code>ZINCRBY key increment member</code>有序集合中对指定成员的分数加上增量 increment</li>
<li><code>ZINTERSTORE destination numkeys key [key ...]</code>计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中</li>
<li><code>ZLEXCOUNT key min max</code>在有序集合中计算指定字典区间内成员数量</li>
<li><code>ZRANGE key start stop [WITHSCORES]</code>通过索引区间返回有序集合成指定区间内的成员</li>
<li><code>ZRANGEBYLEX key min max [LIMIT offset count]</code> 通过字典区间返回有序集合的成员</li>
<li><code>ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT]</code>通过分数返回有序集合指定区间内的成员</li>
<li><code>ZRANK key member</code>返回有序集合中指定成员的索引</li>
<li><code>ZREM key member [member ...]</code>移除有序集合中的一个或多个成员</li>
<li><code>ZREMRANGEBYLEX key min max</code>移除有序集合中给定的字典区间的所有成员</li>
<li><code>ZREMRANGEBYRANK key start stop</code>移除有序集合中给定的排名区间的所有成员</li>
<li><code>ZREMRANGEBYSCORE key min max</code>移除有序集合中给定的分数区间的所有成员</li>
<li><code>ZREVRANGE key start stop [WITHSCORES]</code>返回有序集中指定区间内的成员，通过索引，分数从高到底</li>
<li><code>ZREVRANGEBYSCORE key max min [WITHSCORES]</code>返回有序集中指定分数区间内的成员，分数从高到低排序</li>
<li><code>ZREVRANK key member</code>返回有序集合中指定成员的排名，有序集成员按分数值递减(从大到小)排序</li>
</ol>
<ul>
<li>哈希(<code>Hash</code>)</li>
</ul>
<ol>
<li>Redis hash 是一个string类型的field和value的映射表，hash特别适合用于存储对象,支持保存一个对象里面的多个字段以及对应的字段值</li>
<li><code>HSET key field value</code>将哈希表 key 中的字段 field 的值设为 value </li>
<li><code>HMSET key field1 value1 [field2 value2 ]</code>同时将多个 field-value (域-值)对设置到哈希表 key 中</li>
<li><code>HSETNX key field value</code>只有在字段 field 不存在时，设置哈希表字段的值.</li>
<li><code>HGET key field</code>获取存储在哈希表中指定字段的值</li>
<li><code>HGETALL key</code>获取在哈希表中指定 key 的所有字段和值</li>
<li><code>HVALS key</code>获取哈希表中所有值</li>
<li><code>HSCAN key cursor [MATCH pattern] [COUNT count]</code>迭代哈希表中的键值对</li>
<li><code>HKEYS key</code>获取所有哈希表中的字段</li>
<li><code>HLEN key</code>获取哈希表中字段的数量</li>
<li><code>HMGET key field1 [field2]</code>获取所有给定字段的值</li>
<li><code>HINCRBY key field increment</code> 为哈希表 key 中的指定字段的整数值加上增量 increment </li>
<li><code>HINCRBYFLOAT key field increment</code>为哈希表 key 中的指定字段的浮点数值加上增量 increment </li>
<li><code>HEXISTS key field</code>查看哈希表 key 中，指定的字段是否存在,如果要检测key是否存在，可以使用通用命令来确认。</li>
<li><code>HDEL key field1 [field2]</code>删除一个或多个哈希表字段</li>
</ol>
<h5 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h5><ul>
<li>本文仅仅列出常用的几条Redis指令，具体指令描述，请参照<a href="https://redis.io/commands" target="_blank" rel="noopener">官方文档</a></li>
</ul>
	  
	</div>

	<!-- recommended posts -->
	

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/archives/4354712f.html" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>上一页</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/archives/98ee2edb.html" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>

    <!-- share -->
    
        
    <div class="bdsharebuttonbox">
        <a href="#" class="bds_more" data-cmd="more"></a>
        <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
        <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
        <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
        <a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
        <a href="#" class="bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
        <a href="#" class="bds_evernotecn" data-cmd="evernotecn" title="分享到印象笔记"></a>
        <a href="#" class="bds_youdao" data-cmd="youdao" title="分享到有道云笔记"></a>
        <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a>
    </div>
    <script>
        window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};
        with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
    </script>


        

    
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">留言</h2>
  
  	 <div id="disqus_thread">
     <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  	 </div>
  
</section>


	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2018-06-02 
	</div>
	

	<!-- categories -->
    

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/Redis/">Redis<span>4</span></a></li>
    </ul>
	</div>
	

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->

<script type="text/javascript">
var disqus_shortname = 'cloversoulmate';
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



    </div>
  </div>
  <div class="container-narrow">
    <footer> <p>
  &copy; 2019 Rico Nut
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
  </div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


<!-- syntax highlighting -->


</body>
</html>